# angular2 prototype

This currently has a few components
* svy-form.component.ts file which has to be generated by servoy developer so that we include there all the templates of all the components that are in the developer (or are shipped into a WAR)
the part that needs to be generated are 
```
      <ng-template  #svyTextfield  let-state="state" >
        <svy-textfield [dataprovider]="state.model.dataprovider" (dataproviderChange)="datachange(state.name,'dataprovider',$event)" [name]="state.name" #cmp></svy-textfield>
      </ng-template>
      <ng-template  #svyButton let-state="state">
        <svy-button [dataprovider]="state.model.dataprovider" [click]="getHandler(state, 'click')" [name]="state.name" #cmp></svy-button>
      </ng-template>
```
which are templates of all the components that er in the developer (or that are shipped in a war)
and then we need a reference to all of those templates by name (like #svyTextfield above).
```
 @ViewChild('svyTextfield') readonly svyTextfield:TemplateRef<any>;
 @ViewChild('svyButton') readonly svyButton:TemplateRef<any>;
```
* textfiels.ts and button.ts as an example of a components modules. that is used by the main "app.module.ts" that also has to be generated by servoy developer so that it imports and exports all the component package modules.
```
  imports: [
    BrowserModule,
    ComponentModule
  ],
```
* websocket.service.ts is a service that could also be a WebPackageManager service and that one should also be generated in the app.module.ts file:
```
providers: [WebsocketService,FormService],
```

What needs to be changed at the server side is the form layout/component structure, what is now just a generated html template. For an absolute form this means just a array of some json objects that describes the name and the template that it needs to use (the #svyTextfield above). For an repsonsive form this needs to be a nested json structure that describes the layout containers (the classes like "row", or "container-fluid") and its children which can be also again layout containers or a component which is just the name and the template.

Added an 'allservices.service.ts' that should combine all the services that are provided by the servoy solution. And that all services is then called by the websocket service to execute api on it or set values on it. 
The 'test.service.ts' is a example of that, the api is just directly on that class, and the state (model) are just really properties on that class.

As an example how to rewrite, the reconnecting.websocket.js file of sablo is converted to a 'reconnecting.websocket.ts' file, besides that file we have a 'reconnecting.websocket.spec.ts' file for some testing code around it. (with Mock examples)

#
This project was generated with [Angular CLI](https://github.com/angular/angular-cli) version 1.6.2.

## Development server

Run `ng serve` for a dev server. Navigate to `http://localhost:4200/`. The app will automatically reload if you change any of the source files.

## Code scaffolding

Run `ng generate component component-name` to generate a new component. You can also use `ng generate directive|pipe|service|class|guard|interface|enum|module`.

## Build

Run `ng build` to build the project. The build artifacts will be stored in the `dist/` directory. Use the `-prod` flag for a production build.

## Running unit tests

Run `ng test` to execute the unit tests via [Karma](https://karma-runner.github.io).

## Running end-to-end tests

Run `ng e2e` to execute the end-to-end tests via [Protractor](http://www.protractortest.org/).

## Further help

To get more help on the Angular CLI use `ng help` or go check out the [Angular CLI README](https://github.com/angular/angular-cli/blob/master/README.md).
